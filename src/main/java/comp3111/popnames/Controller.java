/**
 * Building on the sample skeleton for 'ui.fxml' Controller Class generated by SceneBuilder
 */
package comp3111.popnames;

import javafx.fxml.FXML;
import javafx.scene.control.Button;
import javafx.scene.control.Tab;
import javafx.scene.control.ChoiceBox;
import javafx.scene.control.TextArea;
import javafx.scene.control.TextField;
import javafx.scene.control.ToggleGroup;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.ActionEvent;


public class Controller {

    ObservableList<String> genderChoice = FXCollections.observableArrayList("M","F");
    ObservableList<String> ageChoice = FXCollections.observableArrayList("Young","Old");
    ObservableList<String> algorithmChoice = FXCollections.observableArrayList("T5X1","T5X2");

    @FXML
    private Tab tabTaskZero;

    @FXML
    private TextField textfieldNameF;

    @FXML
    private TextField textfieldYear;

    @FXML
    private Button buttonRankM;

    @FXML
    private TextField textfieldNameM;

    @FXML
    private Button buttonRankF;

    @FXML
    private Button buttonTopM;

    @FXML
    private Button buttonTopF;

    @FXML
    private Button buttonSummary;
    
    @FXML
    private Tab tabReport1;

    @FXML
    private ToggleGroup T1;

    @FXML
    private Tab tabReport2;

    @FXML
    private ToggleGroup T11;

    @FXML
    private TextArea task2IntroBox;

    @FXML
    private TextField task2Year1TextField;

    @FXML
    private TextField task2Year2TextField;

    @FXML
    private TextField task2KTextField;

    @FXML
    private ChoiceBox task2GenderChoiceBox;

    @FXML
    private Button task2GenerateButton;

    @FXML
    private Tab tabReport3;

    @FXML
    private ToggleGroup T111;

    @FXML
    private Tab tabApp1;

    @FXML
    private Tab tabApp2;

    @FXML
    private TextArea task5IntroBox;

    @FXML
    private TextField task5iNameTextField;

    @FXML
    private ChoiceBox task5iGenderChoiceBox;

    @FXML
    private TextField task5iAgeTextField;

    @FXML
    private ChoiceBox task5iGenderMateChoiceBox;

    @FXML
    private ChoiceBox task5iPreferenceChoiceBox;

    @FXML
    private ChoiceBox task5AlgorithmChoiceBox;

    @FXML
    private Button task5GenerateButton;

    @FXML
    private Tab tabApp3;

    @FXML
    private TextArea textAreaConsole;
    

    /**
     *  Task Zero
     *  To be triggered by the "Summary" button on the Task Zero Tab 
     *  
     */
    @FXML
    void doSummary() {
    	int year = Integer.parseInt(textfieldYear.getText());
    	String oReport = AnalyzeNames.getSummary(year);
    	textAreaConsole.setText(oReport);
    }

  
    /**
     *  Task Zero
     *  To be triggered by the "Rank (female)" button on the Task Zero Tab
     *  
     */
    @FXML
    void doRankF() {
    	String oReport = "";
    	String iNameF = textfieldNameF.getText();
    	int iYear = Integer.parseInt(textfieldYear.getText());
    	int oRank = AnalyzeNames.getRank(iYear, iNameF, "F");
    	if (oRank == -1)
    		oReport = String.format("The name %s (female) has not been ranked in the year %d.\n", iNameF, iYear);
    	else
    		oReport = String.format("Rank of %s (female) in year %d is #%d.\n", iNameF, iYear, oRank);
    	textAreaConsole.setText(oReport);
    }

  
    /**
     *  Task Zero
     *  To be triggered by the "Rank (male)" button on the Task Zero Tab
     *  
     */
    @FXML
    void doRankM() {
    	String oReport = "";
    	String iNameM = textfieldNameM.getText();
    	int iYear = Integer.parseInt(textfieldYear.getText());
    	int oRank = AnalyzeNames.getRank(iYear, iNameM, "M");
    	if (oRank == -1)
    		oReport = String.format("The name %s (male) has not been ranked in the year %d.\n", iNameM, iYear);
    	else
    		oReport = String.format("Rank of %s (male) in year %d is #%d.\n", iNameM, iYear, oRank);
    	textAreaConsole.setText(oReport);
    }


    /**
     *  Task Zero
     *  To be triggered by the "Top 5 (female)" button on the Task Zero Tab
     *  
     */
    @FXML
    void doTopF() {
    	String oReport = "";
    	final int topN = 5;
    	int iYear = Integer.parseInt(textfieldYear.getText());
    	oReport = String.format("Top %d most popular names (female) in the year %d:\n", topN, iYear);
    	for (int i=1; i<=topN; i++)
    		oReport += String.format("#%d: %s\n", i, AnalyzeNames.getName(iYear, i, "F"));
    	textAreaConsole.setText(oReport);
    }


    /**
     *  Task Zero
     *  To be triggered by the "Top 5 (male)" button on the Task Zero Tab
     *  
     */
    @FXML
    void doTopM() {
    	String oReport = "";
    	final int topN = 5;
    	int iYear = Integer.parseInt(textfieldYear.getText());
    	oReport = String.format("Top %d most popular names (male) in the year %d:\n", topN, iYear);
    	for (int i=1; i<=topN; i++)
    		oReport += String.format("#%d: %s\n", i, AnalyzeNames.getName(iYear, i, "M"));
    	textAreaConsole.setText(oReport);
    }

    /**
     *  Task Two
     *  Initialize the content of the task2GenderChoiceBox
     *
     */
    @FXML
    void initialize() {
        task2GenderChoiceBox.setValue("M");
        task2GenderChoiceBox.setItems(genderChoice);
        task5iGenderChoiceBox.setValue("M");
        task5iGenderChoiceBox.setItems(genderChoice);
        task5iGenderMateChoiceBox.setValue("M");
        task5iGenderMateChoiceBox.setItems(genderChoice);
        task5iPreferenceChoiceBox.setValue("Young");
        task5iPreferenceChoiceBox.setItems(ageChoice);
        task5AlgorithmChoiceBox.setValue("T5X1");
        task5AlgorithmChoiceBox.setItems(algorithmChoice);
    }
    /**
     *  Task Two
     *  To be triggered by the "Generate Report" button on the Task Two Tab
     *
     */
    @FXML
    void task2GenerateReport(ActionEvent event) {
        String oReport = "generate report for task2";
        textAreaConsole.setText(oReport);
    }

    /**
     *  Task Five
     *  To be triggered by the "Generate Report" button on the Task Five Tab
     *
     */
    @FXML
    void task5GenerateReport(ActionEvent event) {
        String oReport = "generate report for task5";
        textAreaConsole.setText(oReport);
    }
    

}





